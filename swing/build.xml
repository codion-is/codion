<project name="jminor-swing">

  <property name="project.root" value="../"/>
  <import file="../build-common.xml"/>

  <target name="package" depends="build, javadoc"
          description="Builds all distribution jar files in the dist directory">
    <package_module module-name="jminor-swing-common-model"
                    includes="org/jminor/swing/common/model/**,
                    org/jminor/swing/SwingConfiguration.class"/>
    <package_module module-name="jminor-swing-common-ui"
                    includes="org/jminor/swing/common/ui/**"/>
    <package_module module-name="jminor-swing-client-model"
                    includes="org/jminor/swing/framework/model/**"/>
    <package_module module-name="jminor-swing-client-ui"
                    includes="org/jminor/swing/framework/ui/**"/>
    <package_module module-name="jminor-swing-client-test"
                    includes="org/jminor/swing/framework/testing/**"/>

    <jar jarfile="${dist}/jminor-swing-client-bundle.jar"
         manifest="${build.main}/META-INF/MANIFEST.MF">
      <zipgroupfileset dir="${lib}/runtime/" includes="
              jminor-common-core-${version}.jar,
              jminor-common-model-${version}.jar,
              jminor-common-db-${version}.jar,
              jminor-framework-model-${version}.jar,
              jminor-framework-db-core-${version}.jar,
              jminor-framework-db-local-${version}.jar,
              jminor-framework-db-remote-${version}.jar"/>
      <zipgroupfileset dir="${dist}" includes="
              jminor-swing-common-model.jar,
              jminor-swing-common-ui.jar,
              jminor-swing-client-model.jar,
              jminor-swing-client-ui.jar"/>
    </jar>
    <jar jarfile="${dist}/jminor-swing-client-bundle-sources.jar"
         manifest="${build.main}/META-INF/MANIFEST.MF">
      <zipgroupfileset dir="${lib}/sources/" includes="
              jminor-common-core-${version}.jar,
              jminor-common-model-${version}.jar,
              jminor-common-db-${version}.jar,
              jminor-framework-model-${version}.jar,
              jminor-framework-db-core-${version}.jar,
              jminor-framework-db-local-${version}.jar,
              jminor-framework-db-remote-${version}.jar"/>
      <zipgroupfileset dir="${dist}" includes="
              jminor-swing-common-model-sources.jar,
              jminor-swing-common-ui-sources.jar,
              jminor-swing-client-model-sources.jar,
              jminor-swing-client-ui-sources.jar"/>
    </jar>
    <jar jarfile="${dist}/jminor-swing-client-bundle-javadoc.jar"
         manifest="${build.main}/META-INF/MANIFEST.MF">
      <zipgroupfileset dir="${lib}/javadoc/" includes="
              jminor-common-core-${version}.jar,
              jminor-common-model-${version}.jar,
              jminor-common-db-${version}.jar,
              jminor-framework-model-${version}.jar,
              jminor-framework-db-core-${version}.jar,
              jminor-framework-db-local-${version}.jar,
              jminor-framework-db-remote-${version}.jar"/>
      <zipgroupfileset dir="${dist}" includes="
              jminor-swing-common-model-javadoc.jar,
              jminor-swing-common-ui-javadoc.jar,
              jminor-swing-client-model-javadoc.jar,
              jminor-swing-client-ui-javadoc.jar"/>
    </jar>
  </target>

  <target name="deploy" depends="package"
          description="deploy all project artifacts">
    <subant target="deploy" buildpath="${basedir}/modules/swing-common-model"/>
    <subant target="deploy" buildpath="${basedir}/modules/swing-common-ui"/>
    <subant target="deploy" buildpath="${basedir}/modules/swing-client-model"/>
    <subant target="deploy" buildpath="${basedir}/modules/swing-client-ui"/>
    <subant target="deploy" buildpath="${basedir}/modules/swing-client-test"/>
    <subant target="deploy" buildpath="${basedir}/modules/swing-client-bundle"/>
  </target>

  <target name="install" depends="package"
          description="install all project artifacts">
    <subant target="install" buildpath="${basedir}/modules/swing-common-model"/>
    <subant target="install" buildpath="${basedir}/modules/swing-common-ui"/>
    <subant target="install" buildpath="${basedir}/modules/swing-client-model"/>
    <subant target="install" buildpath="${basedir}/modules/swing-client-ui"/>
    <subant target="install" buildpath="${basedir}/modules/swing-client-test"/>
    <subant target="install" buildpath="${basedir}/modules/swing-client-bundle"/>
  </target>

  <!--<target name="deploy_generator" depends="package, create_demo_h2db"-->
  <!--description="Deploys the entity generator to the path defined by the 'deploy.generator.path' property">-->
  <!--<mkdir dir="${deploy.generator.path}"/>-->
  <!--<copy file="${dist}/jminor/jminor.jar"-->
  <!--tofile="${deploy.generator.path}/lib/jminor-${version}.jar"/>-->
  <!--<copy todir="${deploy.generator.path}/lib">-->
  <!--<fileset dir="${lib}/runtime.client"/>-->
  <!--</copy>-->
  <!--<copy todir="${deploy.generator.path}">-->
  <!--<fileset dir="${basedir}/resources/entity_generator/"/>-->
  <!--</copy>-->
  <!--<copy todir="${deploy.generator.path}/h2db">-->
  <!--<fileset dir="${db.h2.dir}"/>-->
  <!--</copy>-->
  <!--<copy file="${deploy.generator.policy}" todir="${deploy.generator.config.path}"/>-->
  <!--<chmod dir="${deploy.generator.path}" perm="u+x" type="file" includes="*.sh"/>-->
  <!--</target>-->

</project>