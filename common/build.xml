<?xml version="1.0" encoding="UTF-8"?>
<project name="jminor-common" default="build" basedir=".">

  <property name="project.root" value="../"/>
  <import file="../build-common.xml"/>

  <tstamp>
    <format property="build.date" pattern="yyyy.MM.dd HH:mm"/>
  </tstamp>

  <target name="build" depends="jminor-common.build"
          description="Compiles all source files">
    <concat destfile="${build.main}/org/jminor/common/model/version.txt">${version}-build ${build.date}</concat>
  </target>

  <target name="dist" depends="jminor-common.dist"
          description="Builds all distribution jar files in the dist directory">
    <dist_module module-name="jminor-common-model" includes="org/jminor/common/**"/>
  </target>

  <target name="publish" depends="dist" description="Publish all project artifacts">
    <fail unless="version">Version information not set</fail>
    <subant target="publish" buildpath="${basedir}/modules/common-model"/>
  </target>
</project>