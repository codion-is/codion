task writeVersion {
    doLast {
        def versionFile = new File("${projectDir}/build/classes/java/main/org/jminor/common/version.txt")
        versionFile.getParentFile().mkdirs()
        versionFile.createNewFile()
        versionFile.text = project.version + " " + new Date().format("yyyy.MM.dd HH:mm")
    }
}

classes.dependsOn writeVersion