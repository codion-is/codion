plugins {
    id "org.gradlex.extra-java-module-info"
    id "io.github.f-cramer.jasperreports"
}

dependencies {
    api project(":codion-common-db")

    testImplementation project(":codion-framework-db-local")

    api(libs.jasperreports) {
        exclude group: "org.apache.xmlgraphics"
        exclude group: "xml-apis"
    }
    compileOnly(libs.jasperreports.jdt) {
        exclude group: "net.sf.jasperreports"
    }

    testImplementation project(":codion-dbms-h2")
    testImplementation(libs.javalin) {
        exclude group: "org.jetbrains", module: "annotations"
    }
    testRuntimeOnly(libs.h2)
}

apply from: "extra-module-info-jasperreports.gradle"
apply from: "../../framework/servlet/extra-module-info-javalin.gradle"

jasperreports {
    srcDir = file("src/test/reports")
    classpath.from(project.sourceSets.main.getCompileClasspath())
}

sourceSets.test.resources.srcDir(compileAllReports)