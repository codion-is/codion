<?xml version="1.0" encoding="UTF-8"?>
<ivy-settings>
  <!--JMinor version comes from build.properties-->
  <properties file="build.properties"/>
  <!--Artifactory settings should come from user.properties-->
  <properties file="user.properties"/>
  <settings defaultResolver="main" />
  <credentials host="${artifactory.host}" realm="Artifactory Realm" username="${artifactory.username}" passwd="${artifactory.password}" />
  <resolvers>
    <ibiblio name="install-local" m2compatible="true" root="file://${ivy.local.repository.root}/" changingPattern=".*SNAPSHOT"/>
    <filesystem name="install-local-publish" m2compatible="true">
      <artifact pattern="${ivy.local.repository.root}/[orgPath]/[module]/[revision]/[module]-[revision](-[classifier]).[ext]"/>
    </filesystem>

    <url name="deploy.snapshot">
      <artifact pattern="http://${artifactory.host}:${artifactory.port}/artifactory/libs-snapshot-local/[orgPath]/[module]/[revision]/[module]-[revision](-[classifier]).[ext]"/>
      <ivy pattern="http://${artifactory.host}:${artifactory.port}/artifactory/libs-snapshot-local/[orgPath]/[module]/[revision]/ivy-[revision].xml" />
    </url>
    <url name="deploy.release">
      <artifact pattern="http://${artifactory.host}:${artifactory.port}/artifactory/libs-release-local/[orgPath]/[module]/[revision]/[module]-[revision](-[classifier]).[ext]"/>
      <ivy pattern="http://${artifactory.host}:${artifactory.port}/artifactory/libs-release-local/[orgPath]/[module]/[revision]/ivy-[revision].xml" />
    </url>

    <ibiblio name="libs-release" m2compatible="true"
             root="http://${artifactory.host}:${artifactory.port}/artifactory/libs-release"/>
    <ibiblio name="libs-snapshot" m2compatible="true"
             root="http://${artifactory.host}:${artifactory.port}/artifactory/libs-snapshot-local"/>

    <chain name="main" changingPattern=".*SNAPSHOT">
      <resolver ref="install-local"/>
      <resolver ref="libs-snapshot"/>
      <resolver ref="libs-release"/>
    </chain>
  </resolvers>
</ivy-settings>