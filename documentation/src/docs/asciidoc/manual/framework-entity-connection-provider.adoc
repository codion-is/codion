= EntityConnectionProvider
:dir-chinook-source: ../../../../../demos/chinook/src/main/java
:url-javadoc: link:../api

An {url-javadoc}{framework-db-core}/is/codion/framework/db/EntityConnectionProvider.html[EntityConnectionProvider] is a factory and lifecycle manager for EntityConnection instances â€” ensuring reliable access to the database regardless of protocol (JDBC, RMI, HTTP).

In most cases *EntityConnections* are retrieved from a {url-javadoc}{framework-db-core}/is/codion/framework/db/EntityConnectionProvider.html[EntityConnectionProvider], which is responsible for establishing a connection to the underlying database.
The *EntityConnectionProvider* class is central to the framework and is a common constructor parameter in classes requiring database access.

Each call to *connection()* returns the current active connection. If the existing connection is invalid (e.g., due to network failure or server restart), a new one is transparently established. If the *EntityConnectionProvider* is unable to connect to the underlying database or server, *connection()* throws an exception.

IMPORTANT: Do NOT cache the *EntityConnection* instance. The instance returned by *connection()* should only be kept for a short time, such as a local variable or method parameter since it can become invalid and thereby unusable. Always use *connection()* to make sure you have a healthy *EntityConnection*.

[#_localentityconnectionprovider]
== LocalEntityConnectionProvider

{url-javadoc}{framework-db-local}/is/codion/framework/db/local/LocalEntityConnectionProvider.html[LocalEntityConnectionProvider]

Provides a connection based on a local JDBC connection.

[source,java,indent=0]
----
include::{dir-chinook-source}/is/codion/demos/chinook/manual/EntityConnectionProviderDemo.java[tags=local]
----

[#_remoteentityconnectionprovider]
== RemoteEntityConnectionProvider

{url-javadoc}{framework-db-rmi}/is/codion/framework/db/rmi/RemoteEntityConnectionProvider.html[RemoteEntityConnectionProvider]

Provides a connection based on a remote RMI connection.

[source,java,indent=0]
----
include::{dir-chinook-source}/is/codion/demos/chinook/manual/EntityConnectionProviderDemo.java[tags=remote]
----

[#_httpentityconnectionprovider]
== HttpEntityConnectionProvider

{url-javadoc}{framework-db-http}/is/codion/framework/db/http/HttpEntityConnectionProvider.html[HttpEntityConnectionProvider]

Provides a connection based on a remote HTTP connection.

[source,java,indent=0]
----
include::{dir-chinook-source}/is/codion/demos/chinook/manual/EntityConnectionProviderDemo.java[tags=http]
----

== Customizing the Description

The connection provider description is displayed in the application frame title (e.g., "Chinook - SCOTT@SERVER@HOST") and can be retrieved via `EntityConnectionProvider.description()`.

=== Default Descriptions

Each connection provider type has its own default description:

* *LocalEntityConnectionProvider* - Database name in uppercase (e.g., "H2DB")
* *RemoteEntityConnectionProvider* - Server name and hostname (e.g., "SERVER@HOST")
* *HttpEntityConnectionProvider* - Hostname or URL (e.g., "example.com")

=== Overriding the Description

You can override the default description using the configuration property:

[source,properties]
----
-Dis.codion.framework.db.EntityConnectionProvider.description=MyDescription
----

This is particularly useful when:

* Using HTTP connections with long URLs (e.g., AWS Lambda URLs)
* Hiding production server details from the frame title
* Providing a more user-friendly connection identifier

.Example: Lambda client with custom description
[source,bash]
----
java -Dis.codion.framework.db.EntityConnectionProvider.description=lambda \
     -jar myapp-client-lambda.jar
----

Result: `MyApp - SCOTT@LAMBDA` instead of `MyApp - SCOTT@VF54WI7PTCI5S32DW34RT5BOVM0VBMSU.LAMBDA-URL.EU-NORTH-1.ON.AWS`

.Example: Production client with generic description
[source,bash]
----
java -Dis.codion.framework.db.EntityConnectionProvider.description=production \
     -jar myapp-client.jar
----

Result: `MyApp - SCOTT@PRODUCTION` instead of `MyApp - SCOTT@SERVER@PROD-DB-01.COMPANY.COM`
