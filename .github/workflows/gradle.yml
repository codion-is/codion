name: Java CI

on:
  schedule:
    # * is a special character in YAML so you have to quote this string
    - cron:  '0 3 * * *'

jobs:
  build-linux:
    runs-on: ubuntu-latest
    timeout-minutes: 20
    steps:
      - uses: actions/checkout@v1
      - name: Pull a JavaFX JDK
        run: wget http://static.azul.com/zulu/bin/zulu8.44.0.13-ca-fx-jdk8.0.242-linux_x64.tar.gz
      - name: Set Java
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
          jdkFile: ./zulu8.44.0.13-ca-fx-jdk8.0.242-linux_x64.tar.gz
      - name: Build with Gradle
        run: xvfb-run ./gradlew build
  build-windows:
    runs-on: windows-latest
    timeout-minutes: 20
    steps:
      - uses: actions/checkout@v1
      - name: Pull a JavaFX JDK
        run: Invoke-WebRequest -Uri "http://static.azul.com/zulu/bin/zulu8.44.0.13-ca-fx-jdk8.0.242-win_x64.zip" -OutFile ./zulu8.44.0.13-ca-fx-jdk8.0.242-win_x64.zip
      - name: Set Java
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
          jdkFile: ./zulu8.44.0.13-ca-fx-jdk8.0.242-win_x64.zip
      - name: Build with Gradle
        run: ./gradlew build
  build-mac:
    runs-on: macOS-latest
    timeout-minutes: 20
    steps:
      - uses: actions/checkout@v1
      - name: Pull a JavaFX JDK
        run: curl http://static.azul.com/zulu/bin/zulu8.44.0.13-ca-fx-jdk8.0.242-macosx_x64.tar.gz -o ./zulu8.44.0.13-ca-fx-jdk8.0.242-macosx_x64.tar.gz
      - name: Set Java
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
          jdkFile: ./zulu8.44.0.13-ca-fx-jdk8.0.242-macosx_x64.tar.gz
      - name: Build with Gradle
        run: ./gradlew build